<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ø¯Ø¹ÙˆØ© Ø­ÙÙ„ Ø§Ù„ØªØ®Ø±Ø¬</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
    }
    html {
      scroll-behavior: smooth;
    }
    body {
      margin: 0;
      font-family: 'Tajawal', sans-serif;
      background-color: #f9fafb;
      color: #333;
       font-family: 'Tajawal', sans-serif;
       background-image: url('/image/105638.png');
       background-size: cover;
       background-position: center;
       background-attachment: fixed;
       background-repeat: no-repeat;
       color: #333;
 
    }
    header {
      background: linear-gradient(to right, #990480, #f785a7);
      color: white;
      text-align: center;
      padding: 70px 20px;
    }
    section {
      max-width: 700px;
      margin: 40px auto;
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.6s ease-out;
    }
    section.visible {
      opacity: 1;
      transform: translateY(0);
    }
    .countdown {
      font-size: 22px;
      font-weight: bold;
      margin-top: 10px;
    }
    .confirm-buttons {
      text-align: center;
      margin-top: 20px;
    }
    button {
      padding: 12px 28px;
      font-size: 16px;
      margin: 8px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-family: 'Tajawal', sans-serif;
      transition: background-color 0.3s ease;
    }
    #yesBtn { background-color: #22c55e; color: white; }
    #noBtn { background-color: #ef4444; color: white; }
    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
    #message {
      font-weight: bold;
      margin-top: 20px;
      text-align: center;
    }
    #map iframe {
      width: 100%;
      border: 0;
      border-radius: 10px;
      height: 300px;
    }
  </style>
</head>
<body>

<header>
  <h1 id="welcome">Ø¨ÙƒÙ„ Ù…ÙˆØ¯Ø© ÙˆØ­Ø¨</h1>
  <p>ÙˆÙ„Ø£Ù† Ø§Ù„Ø£ÙØ±Ø§Ø­ Ù„Ø§ØªØªÙ… Ø§Ù„Ø§ Ø¨Ø­Ø¶ÙˆØ± Ù…Ù† Ù†Ø­Ø¨ ÙŠØ³Ø¹Ø¯Ù†ÙŠ ÙˆÙŠØ´Ø±ÙÙ†ÙŠ Ø¯Ø¹ÙˆØªÙƒÙ… Ù„Ø­Ø¶ÙˆØ±ğŸ“</p>
  <div class="countdown" id="countdown">Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
</header>

<section id="details">
  <h2>ğŸ“ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­ÙÙ„</h2>
  <p><strong>Ø§Ù„Ù…ÙƒØ§Ù†:</strong> ...... - Ø§Ù„Ø±ÙŠØ§Ø¶</p>
  <p><strong>Ø§Ù„Ø²Ù…Ø§Ù†:</strong> ÙŠÙˆÙ… - Ø§Ù„Ø³Ø§Ø¹Ø© Ù¨:Ù Ù  Ù…Ø³Ø§Ø¡Ù‹</p>
  <p><strong>Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©:</strong> Ø­ÙÙ„ ØªØ®Ø±Ø¬ Ø¨Ù†ØªÙŠ Ø§Ù„ØºØ§Ù„ÙŠØ© Ù…Ø¯Ù‰ ğŸ’</p>
</section>

<section id="map">
  <h2>ğŸ—ºï¸ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù‚Ø§Ø¹Ø©</h2>
  <iframe
    src="https://maps.google.com/maps?q=Ù‚Ø§Ø¹Ø©%20Ø§Ù„ÙØ®Ø§Ù…Ø©%20Ø§Ù„Ø±ÙŠØ§Ø¶&t=&z=15&ie=UTF8&iwloc=&output=embed"
    allowfullscreen
    loading="lazy">
  </iframe>
</section>

<section id="rsvp">
  <h2>ğŸ‰ Ù‡Ù„ Ø³ØªØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„Ø­Ø¶ÙˆØ±ØŸ</h2>
  <div class="confirm-buttons">
    <button id="yesBtn">Ù†Ø¹Ù…ØŒ Ø³Ø£Ø­Ø¶Ø± Ø¨Ø£Ø°Ù† Ø§Ù„Ù„Ù‡</button>
    <button id="noBtn">Ù„Ø§ØŒØ§Ø¹ØªØ°Ø± Ø¹Ù† Ø§Ù„Ø­Ø¶ÙˆØ±</button>
  </div>
  <div id="message"></div>
</section>

<section id="thanks" style="display: none;">
  <h2>ğŸŠ Ø¨Ø·Ø§Ù‚Ø© Ø´ÙƒØ±</h2>
  <p id="thankText">Ø´ÙƒØ±Ø§ Ù„ØªØ§ÙƒÙŠØ¯ Ø­Ø¶ÙˆØ±Ùƒ\
  </p>
</section>

<script>
  // Ø¸Ù‡ÙˆØ± ØªØ¯Ø±ÙŠØ¬ÙŠ Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ±
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) entry.target.classList.add('visible');
    });
  });
  document.querySelectorAll('section').forEach(el => observer.observe(el));

  // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
  const urlParams = new URLSearchParams(window.location.search);
  const name = urlParams.get("name");
  const token = urlParams.get("token");

  const welcome = document.getElementById("welcome");
  const yesBtn = document.getElementById("yesBtn");
  const noBtn = document.getElementById("noBtn");
  const message = document.getElementById("message");
  const thanks = document.getElementById("thanks");
  const thankText = document.getElementById("thankText");

  if (name) {
    welcome.innerText = `Ù…Ø±Ø­Ø¨Ù‹Ø§ ${name} ğŸŒŸ`;
  }

  function respond(response) {
    yesBtn.disabled = true;
    noBtn.disabled = true;
    message.innerText = "Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...";

    fetch(`https://script.google.com/macros/s/AKfycbye6Z8dGBKOGMLzoomxPTOGzc0ppn_UWDo9LluJP96Ju13GLbLmGyITToI5eCqIyeQ9yA/exec?name=${encodeURIComponent(name)}&token=${token}&response=${response}`)
      .then(res => res.text())
      .then(res => {
        if (res === "success") {
          message.innerText = "";
          document.getElementById("rsvp").style.display = "none";
          thankText.innerText = response === "yes"
            ? `Ø´ÙƒØ±Ù‹Ø§ Ù„Ùƒ ${name || ""} ğŸ‰ Ø­Ø¶ÙˆØ±Ùƒ ÙŠØ³Ø¹Ø¯Ù†Ø§ ÙƒØ«ÙŠØ±Ù‹Ø§!`
            : `Ù†Ø£Ø³Ù Ù„Ø¹Ø¯Ù… ØªÙ…ÙƒÙ†Ùƒ Ù…Ù† Ø§Ù„Ø­Ø¶ÙˆØ±ØŒ Ø´ÙƒØ±Ù‹Ø§ Ù„Ùƒ ${name || ""} Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø¯ ğŸ’™`;
          thanks.style.display = "block";
        } else if (res === "already") {
          message.innerText = "â„¹ï¸ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø±Ø¯Ùƒ Ù…Ø³Ø¨Ù‚Ù‹Ø§.";
        } else {
          message.innerText = "âŒ Ø§Ù„Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ§Ù„Ø­ Ø£Ùˆ Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØªÙ‡.";
        }
      })
      .catch(() => {
        message.innerText = "âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„.";
      });
  }

  yesBtn.onclick = () => respond("yes");
  noBtn.onclick = () => respond("no");

  // Ø¹Ø¯Ø§Ø¯ ØªÙ†Ø§Ø²Ù„ÙŠ
  const countdownElement = document.getElementById("countdown");
  const countdownDate = new Date(2025, 5, 21, 20, 0, 0).getTime(); // 21 ÙŠÙˆÙ†ÙŠÙˆ 2025 - 8:00 Ù…Ø³Ø§Ø¡Ù‹
  const countdownInterval = setInterval(() => {
    const now = new Date().getTime();
    const distance = countdownDate - now;

    if (distance <= 0) {
      clearInterval(countdownInterval);
      countdownElement.innerText = "ğŸ‰ Ø¨Ø¯Ø£ Ø§Ù„Ø­ÙÙ„ Ø§Ù„Ø¢Ù†!";
      return;
    }

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

    countdownElement.innerText =
      `ÙŠØªØ¨Ù‚Ù‰: ${days} ÙŠÙˆÙ…ØŒ ${hours} Ø³Ø§Ø¹Ø©ØŒ ${minutes} Ø¯Ù‚ÙŠÙ‚Ø©ØŒ ${seconds} Ø«Ø§Ù†ÙŠØ©`;
  }, 1000);
</script>

</body>
</html>